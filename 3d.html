<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>3D Demo</title>

    <style>
        .stack {
            perspective: 50rem;
            transform-style: preserve-3d;
            transform: translateZ(-100px);
        }

        .front {
            transform: translateZ(0);
        }

        .stack-item {
            transform: translateZ(var(--translate-z)) translateY(var(--translate-y));
        }
    </style>
</head>

<body class="p-0 m-0 scroll-smooth p-4">
    <ul class="stack h-full w-full border-2 border-slate-300 snap-y p-4 overflow-y-auto snap-mandatory">
        <!-- <li class="front bg-green-400/50 w-full aspect-[1/1.62] absolute border-2 border-slate-900 rounded-xl"></li>
        <li class="back bg-red-400/50 w-full aspect-[1/1.62] absolute border-2 border-slate-900 rounded-xl"></li> -->
        <li class="stack-item bg-red-400/50 w-full aspect-[1/1.62] border-2 border-slate-900 rounded-xl snap-center sticky top-0"
            style="--translate-z: -6rem; --translate-y: -4rem;"></li>
        <li class="stack-item bg-green-400/50 w-full aspect-[1/1.62] border-2 border-slate-900 rounded-xl snap-center sticky top-0"
            style="--translate-z: -4rem; --translate-y: -2rem;">
        </li>
        <li class="stack-item bg-orange-400/50 w-full aspect-[1/1.62] border-2 border-slate-900 rounded-xl snap-center sticky top-0"
            style="--translate-z: -2rem; --translate-y: 0rem;">
        </li>
        <li class="stack-item bg-pink-400/50 w-full aspect-[1/1.62] border-2 border-slate-900 rounded-xl snap-center sticky top-0"
            style="--translate-z: 0rem; --translate-y: 2rem;">
        </li>
    </ul>
    <script>

        const list = document.getElementById("list");
        const children = list.children;
        const count = list.children.length;

        list.addEventListener("scroll", event => {
            let height = list.clientHeight;
            let scrollHeight = list.scrollHeight - height;
            let scrollTop = list.scrollTop;
            let percent = scrollTop / scrollHeight;

            // ðŸ‘‡ example how we shrink based on position and scroll percentage with never going above 100%
            // let positionPercent = 1 / 5
            // console.log([1,2,3,4,5].map(n => (100 - Math.floor(50 * (1 - n/5) * percent))))

            for (let index = 0; index < count; index++) {
                const child = children[index];
                const position = index + 1;
                const positionPercent = position / count;
                const value = (100 - Math.floor(50 * (1 - positionPercent) * percent));

                child.style.setProperty("--scale", `${value}%`);
            }
        })
    </script>
</body>

</html>